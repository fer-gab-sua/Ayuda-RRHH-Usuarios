{% extends 'rrhh/base_rrhh.html' %}

{% block title %}Crear Empleado{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h1 class="h3">Crear Nuevo Empleado</h1>
                <a href="{% url 'rrhh:empleados' %}" class="btn btn-secondary">
                    <i class="fas fa-arrow-left"></i> Volver
                </a>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-12 col-lg-8">
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title mb-0">Informaci√≥n del Empleado</h5>
                </div>
                <div class="card-body">
                    <form method="post">
                        {% csrf_token %}
                        
                        <!-- Datos de Usuario -->
                        <div class="row mb-4">
                            <div class="col-12">
                                <h6 class="text-primary border-bottom pb-2">Datos de Acceso</h6>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="{{ form.username.id_for_label }}" class="form-label">{{ form.username.label }}</label>
                                    {{ form.username }}
                                    {% if form.username.errors %}
                                        <div class="text-danger small">{{ form.username.errors.0 }}</div>
                                    {% endif %}
                                    {% if form.username.help_text %}
                                        <div class="form-text">{{ form.username.help_text }}</div>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="{{ form.email.id_for_label }}" class="form-label">{{ form.email.label }}</label>
                                    {{ form.email }}
                                    {% if form.email.errors %}
                                        <div class="text-danger small">{{ form.email.errors.0 }}</div>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="{{ form.password1.id_for_label }}" class="form-label">{{ form.password1.label }}</label>
                                    {{ form.password1 }}
                                    {% if form.password1.errors %}
                                        <div class="text-danger small">{{ form.password1.errors.0 }}</div>
                                    {% endif %}
                                    {% if form.password1.help_text %}
                                        <div class="form-text">{{ form.password1.help_text }}</div>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="{{ form.password2.id_for_label }}" class="form-label">{{ form.password2.label }}</label>
                                    {{ form.password2 }}
                                    {% if form.password2.errors %}
                                        <div class="text-danger small">{{ form.password2.errors.0 }}</div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>

                        <!-- Datos Personales -->
                        <div class="row mb-4">
                            <div class="col-12">
                                <h6 class="text-primary border-bottom pb-2">Datos Personales</h6>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="{{ form.first_name.id_for_label }}" class="form-label">{{ form.first_name.label }}</label>
                                    {{ form.first_name }}
                                    {% if form.first_name.errors %}
                                        <div class="text-danger small">{{ form.first_name.errors.0 }}</div>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="{{ form.last_name.id_for_label }}" class="form-label">{{ form.last_name.label }}</label>
                                    {{ form.last_name }}
                                    {% if form.last_name.errors %}
                                        <div class="text-danger small">{{ form.last_name.errors.0 }}</div>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="{{ form.dni.id_for_label }}" class="form-label">{{ form.dni.label }}</label>
                                    {{ form.dni }}
                                    {% if form.dni.errors %}
                                        <div class="text-danger small">{{ form.dni.errors.0 }}</div>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="{{ form.cuil.id_for_label }}" class="form-label">{{ form.cuil.label }}</label>
                                    {{ form.cuil }}
                                    {% if form.cuil.errors %}
                                        <div class="text-danger small">{{ form.cuil.errors.0 }}</div>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="{{ form.fecha_nacimiento.id_for_label }}" class="form-label">{{ form.fecha_nacimiento.label }}</label>
                                    {{ form.fecha_nacimiento }}
                                    {% if form.fecha_nacimiento.errors %}
                                        <div class="text-danger small">{{ form.fecha_nacimiento.errors.0 }}</div>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="{{ form.telefono.id_for_label }}" class="form-label">{{ form.telefono.label }}</label>
                                    {{ form.telefono }}
                                    {% if form.telefono.errors %}
                                        <div class="text-danger small">{{ form.telefono.errors.0 }}</div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>

                        <!-- Datos Laborales -->
                        <div class="row mb-4">
                            <div class="col-12">
                                <h6 class="text-primary border-bottom pb-2">Datos Laborales</h6>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="{{ form.legajo.id_for_label }}" class="form-label">{{ form.legajo.label }}</label>
                                    {{ form.legajo }}
                                    {% if form.legajo.errors %}
                                        <div class="text-danger small">{{ form.legajo.errors.0 }}</div>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="{{ form.numero_legajo.id_for_label }}" class="form-label">{{ form.numero_legajo.label }}</label>
                                    {{ form.numero_legajo }}
                                    {% if form.numero_legajo.errors %}
                                        <div class="text-danger small">{{ form.numero_legajo.errors.0 }}</div>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="{{ form.puesto.id_for_label }}" class="form-label">{{ form.puesto.label }}</label>
                                    {{ form.puesto }}
                                    {% if form.puesto.errors %}
                                        <div class="text-danger small">{{ form.puesto.errors.0 }}</div>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="{{ form.departamento.id_for_label }}" class="form-label">{{ form.departamento.label }}</label>
                                    {{ form.departamento }}
                                    {% if form.departamento.errors %}
                                        <div class="text-danger small">{{ form.departamento.errors.0 }}</div>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="{{ form.supervisor.id_for_label }}" class="form-label">{{ form.supervisor.label }}</label>
                                    {{ form.supervisor }}
                                    {% if form.supervisor.errors %}
                                        <div class="text-danger small">{{ form.supervisor.errors.0 }}</div>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="{{ form.tipo_contrato.id_for_label }}" class="form-label">{{ form.tipo_contrato.label }}</label>
                                    {{ form.tipo_contrato }}
                                    {% if form.tipo_contrato.errors %}
                                        <div class="text-danger small">{{ form.tipo_contrato.errors.0 }}</div>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="{{ form.salario.id_for_label }}" class="form-label">{{ form.salario.label }}</label>
                                    {{ form.salario }}
                                    {% if form.salario.errors %}
                                        <div class="text-danger small">{{ form.salario.errors.0 }}</div>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="{{ form.fecha_contrato.id_for_label }}" class="form-label">{{ form.fecha_contrato.label }}</label>
                                    {{ form.fecha_contrato }}
                                    {% if form.fecha_contrato.errors %}
                                        <div class="text-danger small">{{ form.fecha_contrato.errors.0 }}</div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>

                        <!-- Contacto de Emergencia -->
                        <div class="row mb-4">
                            <div class="col-12">
                                <h6 class="text-primary border-bottom pb-2">Contacto de Emergencia</h6>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="{{ form.contacto_emergencia.id_for_label }}" class="form-label">{{ form.contacto_emergencia.label }}</label>
                                    {{ form.contacto_emergencia }}
                                    {% if form.contacto_emergencia.errors %}
                                        <div class="text-danger small">{{ form.contacto_emergencia.errors.0 }}</div>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="{{ form.telefono_emergencia.id_for_label }}" class="form-label">{{ form.telefono_emergencia.label }}</label>
                                    {{ form.telefono_emergencia }}
                                    {% if form.telefono_emergencia.errors %}
                                        <div class="text-danger small">{{ form.telefono_emergencia.errors.0 }}</div>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="{{ form.relacion_emergencia.id_for_label }}" class="form-label">{{ form.relacion_emergencia.label }}</label>
                                    {{ form.relacion_emergencia }}
                                    {% if form.relacion_emergencia.errors %}
                                        <div class="text-danger small">{{ form.relacion_emergencia.errors.0 }}</div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>

                        <!-- Permisos -->
                        <div class="row mb-4">
                            <div class="col-12">
                                <h6 class="text-primary border-bottom pb-2">Permisos</h6>
                            </div>
                            <div class="col-md-6">
                                <div class="form-check">
                                    {{ form.es_rrhh }}
                                    <label class="form-check-label" for="{{ form.es_rrhh.id_for_label }}">
                                        {{ form.es_rrhh.label }}
                                    </label>
                                    {% if form.es_rrhh.errors %}
                                        <div class="text-danger small">{{ form.es_rrhh.errors.0 }}</div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>

                        <div class="d-flex justify-content-between">
                            <a href="{% url 'rrhh:empleados' %}" class="btn btn-secondary">Cancelar</a>
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-save"></i> Guardar Empleado
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .form-control, .form-select {
        border-radius: 0.375rem;
        border: 1px solid #d1d5db;
    }

    .form-control:focus, .form-select:focus {
        border-color: #3b82f6;
        box-shadow: 0 0 0 0.2rem rgba(59, 130, 246, 0.25);
    }

    .form-label {
        font-weight: 500;
        margin-bottom: 0.5rem;
    }

    .text-danger {
        font-size: 0.875rem;
    }

    .form-text {
        color: #6b7280;
        font-size: 0.875rem;
    }

    .border-bottom {
        border-bottom: 2px solid #e5e7eb !important;
    }
</style>
{% endblock %}
