<!-- Modal para agregar familiar -->
<div class="modal fade" id="modalAgregarFamiliar" tabindex="-1" aria-labelledby="modalAgregarFamiliarLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="modalAgregarFamiliarLabel">Agregar Familiar</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <form id="formAgregarFamiliar">
        <div class="modal-body">
          <div class="mb-3">
            <label for="apellido" class="form-label">Apellido</label>
            <input type="text" class="form-control" id="apellido" name="apellido" required>
          </div>
          <div class="mb-3">
            <label for="nombre" class="form-label">Nombre</label>
            <input type="text" class="form-control" id="nombre" name="nombre" required>
          </div>
          <div class="mb-3">
            <label for="fecha_nacimiento" class="form-label">Fecha de nacimiento</label>
            <input type="date" class="form-control" id="fecha_nacimiento" name="fecha_nacimiento" required>
          </div>
          <div class="mb-3">
            <label for="dni" class="form-label">DNI</label>
            <input type="text" class="form-control" id="dni" name="dni" required>
          </div>
          <div class="mb-3">
            <label for="parentesco" class="form-label">Parentesco</label>
            <select class="form-select" id="parentesco" name="parentesco" required>
              <option value="">Seleccionar...</option>
              <option value="esposo/a">Esposo/a</option>
              <option value="hijo/a">Hijo/a</option>
              <option value="padre/madre">Padre/Madre</option>
              <option value="hermano/a">Hermano/a</option>
              <option value="otro">Otro</option>
            </select>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
          <button type="submit" class="btn btn-primary">Agregar Familiar</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Modal para solicitar cambio de domicilio -->
<div class="modal fade" id="modalCambioDomicilio" tabindex="-1" aria-labelledby="modalCambioDomicilioLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="modalCambioDomicilioLabel">Solicitud de Cambio de Domicilio</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <form id="formCambioDomicilio">
        <div class="modal-body">
          <div class="alert alert-info">
            <h6><i class="fas fa-info-circle"></i> Informaci√≥n Importante</h6>
            <p>Esta solicitud requiere una declaraci√≥n jurada. Los datos ser√°n revisados por el departamento de RRHH antes de ser aprobados.</p>
          </div>
          
          <h6>Nuevos Datos de Domicilio</h6>
          <div class="row">
            <div class="col-md-8">
              <div class="mb-3">
                <label for="calle" class="form-label">Calle</label>
                <input type="text" class="form-control" id="calle" name="calle" required>
              </div>
            </div>
            <div class="col-md-4">
              <div class="mb-3">
                <label for="numero" class="form-label">N√∫mero</label>
                <input type="text" class="form-control" id="numero" name="numero" required>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-6">
              <div class="mb-3">
                <label for="piso" class="form-label">Piso</label>
                <input type="text" class="form-control" id="piso" name="piso">
              </div>
            </div>
            <div class="col-md-6">
              <div class="mb-3">
                <label for="depto" class="form-label">Depto</label>
                <input type="text" class="form-control" id="depto" name="depto">
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-6">
              <div class="mb-3">
                <label for="barrio" class="form-label">Barrio</label>
                <input type="text" class="form-control" id="barrio" name="barrio">
              </div>
            </div>
            <div class="col-md-6">
              <div class="mb-3">
                <label for="localidad" class="form-label">Localidad</label>
                <input type="text" class="form-control" id="localidad" name="localidad" required>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-6">
              <div class="mb-3">
                <label for="provincia" class="form-label">Provincia</label>
                <input type="text" class="form-control" id="provincia" name="provincia" required>
              </div>
            </div>
            <div class="col-md-6">
              <div class="mb-3">
                <label for="codigo_postal" class="form-label">C√≥digo Postal</label>
                <input type="text" class="form-control" id="codigo_postal" name="codigo_postal">
              </div>
            </div>
          </div>
          <div class="mb-3">
            <label for="entre_calles" class="form-label">Entre calles</label>
            <input type="text" class="form-control" id="entre_calles" name="entre_calles">
          </div>
          <div class="mb-3">
            <label for="observaciones" class="form-label">Observaciones</label>
            <textarea class="form-control" id="observaciones" name="observaciones" rows="3"></textarea>
          </div>
          
          <hr>
          <div class="alert alert-warning">
            <h6><i class="fas fa-exclamation-triangle"></i> Declaraci√≥n Jurada</h6>
            <p>Al continuar, declaro bajo juramento que:</p>
            <ul>
              <li>Los datos proporcionados en esta solicitud son veraces y completos.</li>
              <li>Comprendo que la falsedad en esta declaraci√≥n puede acarrear sanciones disciplinarias.</li>
              <li>Autorizo a la empresa a verificar la informaci√≥n proporcionada.</li>
              <li>Me comprometo a presentar la documentaci√≥n respaldatoria que me sea requerida.</li>
            </ul>
          </div>
          
          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="aceptoTerminosDomicilio" name="acepto_terminos" required>
            <label class="form-check-label" for="aceptoTerminosDomicilio">
              Acepto los t√©rminos de la declaraci√≥n jurada
            </label>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
          <button type="submit" class="btn btn-primary">Generar PDF para Revisar</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Modal para solicitar cambio de obra social -->
<div class="modal fade" id="modalCambioObraSocial" tabindex="-1" aria-labelledby="modalCambioObraSocialLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="modalCambioObraSocialLabel">Solicitud de Cambio de Obra Social</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <form id="formCambioObraSocial" enctype="multipart/form-data">
        <div class="modal-body">
          <div class="alert alert-info">
            <h6><i class="fas fa-info-circle"></i> Informaci√≥n Importante</h6>
            <p>Esta solicitud requiere una declaraci√≥n jurada. Los datos ser√°n revisados por el departamento de RRHH antes de ser aprobados.</p>
          </div>
          
          <h6>Nuevos Datos de Obra Social</h6>
          <div class="mb-3">
            <label for="nombre_obra_social" class="form-label">Nombre de la Obra Social <span style="color: red;">*</span></label>
            <input type="text" class="form-control" id="nombre_obra_social" name="nombre" required>
            <div class="form-text">Nombre completo de la nueva obra social</div>
          </div>
          <div class="mb-3">
            <label for="observaciones_obra_social" class="form-label">Observaciones</label>
            <textarea class="form-control" id="observaciones_obra_social" name="observaciones" rows="3" placeholder="Informaci√≥n adicional sobre el cambio (opcional)"></textarea>
          </div>
          
          <div class="mb-3">
            <label for="archivo_adjunto" class="form-label">Archivo Adjunto (PDF)</label>
            <input type="file" class="form-control" id="archivo_adjunto" name="archivo_adjunto" accept=".pdf">
            <div class="form-text">Opcional - Adjunta un PDF si tienes documentaci√≥n adicional (m√°ximo 10MB)</div>
          </div>
          
          <div class="alert alert-info">
            <h6><i class="fas fa-info-circle"></i> Informaci√≥n sobre la fecha de alta</h6>
            <p class="mb-0">La fecha de alta se establecer√° autom√°ticamente como la fecha de aprobaci√≥n de esta solicitud por parte de RRHH.</p>
          </div>
          
          <hr>
          <div class="alert alert-warning">
            <h6><i class="fas fa-exclamation-triangle"></i> Declaraci√≥n Jurada</h6>
            <p>Al continuar, declaro bajo juramento que:</p>
            <ul>
              <li>Los datos proporcionados en esta solicitud son veraces y completos.</li>
              <li>Comprendo que la falsedad en esta declaraci√≥n puede acarrear sanciones disciplinarias.</li>
              <li>Autorizo a la empresa a verificar la informaci√≥n proporcionada.</li>
              <li>Me comprometo a presentar la documentaci√≥n respaldatoria que me sea requerida.</li>
            </ul>
          </div>
          
          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="aceptoTerminosObraSocial" name="acepto_terminos" required>
            <label class="form-check-label" for="aceptoTerminosObraSocial">
              Acepto los t√©rminos de la declaraci√≥n jurada
            </label>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
          <button type="submit" class="btn btn-primary">Generar PDF para Revisar</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Modal para crear/editar firma digital -->
<div class="modal fade" id="modalFirmaDigital" tabindex="-1" aria-labelledby="modalFirmaDigitalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="modalFirmaDigitalLabel">Crear Firma Digital</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <form id="formFirmaDigital">
        <div class="modal-body">
          <div class="alert alert-info">
            <h6><i class="fas fa-info-circle"></i> Instrucciones</h6>
            <p>Dibuja tu firma en el √°rea designada y establece un PIN de seguridad. Esta firma ser√° utilizada para validar documentos y solicitudes.</p>
          </div>
          
          <div class="mb-3">
            <label class="form-label">Dibuja tu Firma</label>
            <div class="signature-pad">
              <canvas id="canvasFirmaDigital" width="500" height="250" style="border: 2px solid #ddd; border-radius: 8px; background: white; width: 100%;"></canvas>
              <div style="margin-top: 8px;">
                <button type="button" class="btn btn-sm btn-secondary" onclick="limpiarFirma('canvasFirmaDigital')">Limpiar</button>
                <small class="text-muted">Usa el mouse o touch para dibujar tu firma</small>
              </div>
            </div>
          </div>
          
          <div class="row">
            <div class="col-md-6">
              <div class="mb-3">
                <label for="pin" class="form-label">PIN de Seguridad</label>
                <input type="password" class="form-control" id="pin" name="pin" maxlength="6" required>
                <div class="form-text">Entre 4 y 6 d√≠gitos</div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="mb-3">
                <label for="confirmar_pin" class="form-label">Confirmar PIN</label>
                <input type="password" class="form-control" id="confirmar_pin" name="confirmar_pin" maxlength="6" required>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
          <button type="submit" class="btn btn-primary">Guardar Firma</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Modal para revisar y firmar PDF -->
<div class="modal fade" id="modalFirmarPDF" tabindex="-1" aria-labelledby="modalFirmarPDFLabel" aria-hidden="true">
  <div class="modal-dialog modal-xl">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="modalFirmarPDFLabel">Revisar y Firmar Declaraci√≥n Jurada</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="alert alert-info">
          <h6><i class="fas fa-info-circle"></i> Revisa el documento</h6>
          <p><strong>IMPORTANTE:</strong> Este es un preview del documento. La firma digital se aplicar√° √∫nicamente despu√©s de que ingreses tu PIN y confirmes el env√≠o.</p>
        </div>
        
        <!-- Contenedor para el PDF -->
        <div id="pdfContainer" style="width: 100%; height: 600px; border: 1px solid #ddd; margin-bottom: 20px;">
          <iframe id="pdfViewer" style="width: 100%; height: 100%; border: none;"></iframe>
        </div>
        
        <!-- Secci√≥n de firma -->
        <div class="card">
          <div class="card-header">
            <h6 class="mb-0">üîí Firmar Documento Digitalmente</h6>
          </div>
          <div class="card-body">
            <!-- Contenedor para mensajes de error dentro del modal -->
            <div id="mensajeErrorModal" style="display: none;"></div>
            
            <div class="alert alert-warning" style="margin-bottom: 20px;">
              <strong>‚ö†Ô∏è Proceso de Firma:</strong><br>
              1. Has revisado el documento arriba<br>
              2. Al hacer clic en "Firmar y Enviar" se aplicar√° tu firma digital<br>
              3. El documento firmado se enviar√° autom√°ticamente a RRHH
            </div>
            
            <form id="formFirmarPDF">
              <div class="mb-3">
                <label class="form-label">Ingresa tu PIN de firma digital:</label>
                <input type="password" class="form-control" id="pinFirmarPDF" name="pin_firma" 
                       placeholder="PIN de 4-6 d√≠gitos" maxlength="6" required>
                <div class="form-text">Este PIN validar√° tu identidad y aplicar√° tu firma digital al documento.</div>
              </div>
              
              <div class="form-check mb-3">
                <input class="form-check-input" type="checkbox" id="confirmarRevision" required>
                <label class="form-check-label" for="confirmarRevision">
                  <strong>He revisado todos los datos y confirmo que son correctos</strong>
                </label>
              </div>
              
              <div class="form-check mb-3">
                <input class="form-check-input" type="checkbox" id="confirmarFirma" required>
                <label class="form-check-label" for="confirmarFirma">
                  <strong>Autorizo la aplicaci√≥n de mi firma digital a este documento</strong>
                </label>
              </div>
              
              <div class="d-flex justify-content-between">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                  ‚ùå Cancelar
                </button>
                <button type="submit" class="btn btn-success">
                  üîí Firmar y Enviar a RRHH
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal para revisar y firmar PDF de obra social -->
<div class="modal fade" id="modalFirmarPDFObraSocial" tabindex="-1" aria-labelledby="modalFirmarPDFObraSocialLabel" aria-hidden="true">
  <div class="modal-dialog modal-xl">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="modalFirmarPDFObraSocialLabel">Revisar y Firmar Declaraci√≥n Jurada - Obra Social</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="alert alert-info">
          <h6><i class="fas fa-info-circle"></i> Revisa el documento</h6>
          <p><strong>IMPORTANTE:</strong> Este es un preview del documento. La firma digital se aplicar√° √∫nicamente despu√©s de que ingreses tu PIN y confirmes el env√≠o.</p>
        </div>
        
        <!-- Contenedor para el PDF -->
        <div id="pdfContainerObraSocial" style="width: 100%; height: 600px; border: 1px solid #ddd; margin-bottom: 20px;">
          <iframe id="pdfViewerObraSocial" style="width: 100%; height: 100%; border: none;"></iframe>
        </div>
        
        <!-- Secci√≥n de firma -->
        <div class="card">
          <div class="card-header">
            <h6 class="mb-0">üîí Firmar Documento Digitalmente</h6>
          </div>
          <div class="card-body">
            <!-- Contenedor para mensajes de error dentro del modal -->
            <div id="mensajeErrorModalObraSocial" style="display: none;"></div>
            
            <div class="alert alert-warning" style="margin-bottom: 20px;">
              <strong>‚ö†Ô∏è Proceso de Firma:</strong><br>
              1. Has revisado el documento arriba<br>
              2. Al hacer clic en "Firmar y Enviar" se aplicar√° tu firma digital<br>
              3. El documento firmado se enviar√° autom√°ticamente a RRHH
            </div>
            
            <form id="formFirmarPDFObraSocial">
              <div class="mb-3">
                <label class="form-label">Ingresa tu PIN de firma digital:</label>
                <input type="password" class="form-control" id="pinFirmarPDFObraSocial" name="pin_firma" 
                       placeholder="PIN de 4-6 d√≠gitos" maxlength="6" required>
                <div class="form-text">Este PIN validar√° tu identidad y aplicar√° tu firma digital al documento.</div>
              </div>
              
              <div class="form-check mb-3">
                <input class="form-check-input" type="checkbox" id="confirmarRevisionObraSocial" required>
                <label class="form-check-label" for="confirmarRevisionObraSocial">
                  <strong>He revisado todos los datos y confirmo que son correctos</strong>
                </label>
              </div>
              
              <div class="form-check mb-3">
                <input class="form-check-input" type="checkbox" id="confirmarFirmaObraSocial" required>
                <label class="form-check-label" for="confirmarFirmaObraSocial">
                  <strong>Autorizo la aplicaci√≥n de mi firma digital a este documento</strong>
                </label>
              </div>
              
              <div class="d-flex justify-content-between">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                  ‚ùå Cancelar
                </button>
                <button type="submit" class="btn btn-success">
                  üîí Firmar y Enviar a RRHH
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
